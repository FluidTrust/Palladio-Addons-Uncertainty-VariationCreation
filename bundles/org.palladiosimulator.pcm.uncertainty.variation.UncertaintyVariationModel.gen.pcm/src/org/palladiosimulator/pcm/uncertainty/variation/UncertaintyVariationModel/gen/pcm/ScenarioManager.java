package org.palladiosimulator.pcm.uncertainty.variation.UncertaintyVariationModel.gen.pcm;

import java.io.IOException;
import java.util.List;
import java.util.Map;

import org.eclipse.core.runtime.CoreException;
import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.emf.common.util.URI;
import org.eclipse.emf.ecore.EObject;

public interface ScenarioManager {

    /**
     * generates variant i from the base models by copying the files into configuration_i
     * subdirectory of the scenario folder of the current project.
     *
     * @param idx
     *            specifies the id number of the current variant
     * @param progressMonitor
     *            progress monitor for status reporting
     * @throws CoreException
     *             if existing configuration cannot be deleted or new configuration cannot be
     *             generated
     */
    void createCurrVariant(int idx, IProgressMonitor progressMonitor) throws CoreException;

    /**
     * registers the known varying model types of the pcm for later loading.
     *
     * @param knownVariingModelTypes
     *            specifies a list with the names of the known model that should be varied.
     */
    void register(List<String> knownVariingModelTypes);

    /**
     * loads and returns the different pcm models that must be varied of the current variant. This
     * function requires a single call of the function register and a call of the function
     * createCurrVariant.
     *
     * @return a map between model type as string and loaded models of this type
     * @throws CoreException
     */
    Map<String, List<EObject>> loadCurrVariantModels() throws CoreException;

    /**
     * store the pcm models that were loaded with the function loadCurrVariantModels.
     *
     * @param models
     *            specifies the models that shall be stored
     * @throws IOException
     */
    void storeCurrVariantModels(Map<String, List<EObject>> models) throws IOException;

    /**
     * returns the uri of the current variant generated by the function createCurrVariant.
     *
     * return the platform uri to the current variant.
     */
    URI getCurrVariantUri();

}